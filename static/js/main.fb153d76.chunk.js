(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(6),i=n.n(o),r=(n(14),n(9)),s=n(2),u=n.p+"static/media/logo-white.bbe2a6ea.svg",l=n(0);var d=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("img",{className:"logo",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f Mesto",src:u})})},j=Object(a.createContext)({});var b=function(e){var t=e.card,n=e.onCardClick,c=e.onDeleteCard,o=e.onCardLike,i=Object(a.useContext)(j),r=t.owner._id===i._id,s=t.likes.some((function(e){return e._id===i._id}));return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsx)("button",{type:"button",onClick:function(){c(t)},className:"card__icon-delete ".concat(r?"card__icon-delete_visible":"card__icon-delete_hidden")}),Object(l.jsx)("img",{className:"card__image",onClick:function(){n(t)},alt:t.name,src:t.link}),Object(l.jsxs)("div",{className:"card__description",children:[Object(l.jsx)("h2",{className:"card__title",children:t.name}),Object(l.jsxs)("div",{className:"card__like-wrapper",children:[Object(l.jsx)("button",{type:"button",onClick:function(){o(t)},className:"card__icon-like ".concat(s?"card__icon-like_active":"")}),Object(l.jsx)("p",{className:"card__count-likes",children:t.likes.length})]})]})]})};var p=function(e){var t=e.onEditAvatar,n=e.onEditProfile,c=e.onAddPlace,o=e.onCardClick,i=e.cards,r=e.onCardLike,s=e.onCardDelete,u=Object(a.useContext)(j);return Object(l.jsxs)("main",{children:[Object(l.jsxs)("section",{className:"profile",children:[Object(l.jsxs)("div",{className:"profile__avatar-container",children:[Object(l.jsx)("img",{className:"profile__photo",alt:"\u0444\u043e\u0442\u043e \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435",src:u.avatar}),Object(l.jsx)("div",{onClick:t,className:"profile__avatar-overlay"})]}),Object(l.jsxs)("div",{className:"profile__intro",children:[Object(l.jsxs)("div",{className:"profile__name-and-button",children:[Object(l.jsx)("h1",{className:"profile__name",children:u.name}),Object(l.jsx)("button",{onClick:n,type:"button",className:"profile__edit-button"})]}),Object(l.jsx)("p",{className:"profile__description",children:u.about})]}),Object(l.jsx)("button",{onClick:c,type:"button",className:"profile__add-button"})]}),Object(l.jsx)("section",{className:"cards",children:i.map((function(e){return Object(l.jsx)(b,{onCardLike:r,card:e,onCardClick:o,onDeleteCard:s},e._id)}))})]})};var h=function(){return Object(l.jsx)("footer",{className:"footer",children:Object(l.jsxs)("p",{className:"footer__text",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var m=function(e){var t=e.isOpen,n=e.onClose,a=e.card;return Object(l.jsx)("section",{className:"popup ".concat(t?"popup_opened":""),id:"popup__photo",children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{type:"button",onClick:n,className:"popup__icon-close popup__icon-close-photo"}),Object(l.jsx)("img",{className:"popup__photo",alt:a.name,src:a.link}),Object(l.jsx)("p",{className:"popup__description",children:a.name})]})})},f=n(7),_=n(8),O=function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))},v=new(function(){function e(t){Object(f.a)(this,e),this._baseUrl=t.baseUrl,this._authorization=t.headers.authorization}return Object(_.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{authorization:"".concat(this._authorization)}}).then(O)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:{authorization:"".concat(this._authorization)}}).then(O)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:"".concat(this._authorization),"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(O)}},{key:"addNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:"".concat(this._authorization),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(O)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:{authorization:"".concat(this._authorization)}}).then(O)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"".concat(this._authorization)}}).then(O)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"".concat(this._authorization),"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then(O)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-22",headers:{authorization:"67fb5242-644a-424c-b1b4-e82b266c66c5"}}),x=Object(a.createContext)();var C=function(e){var t=e.isOpen,n=e.onClose,a=e.name,c=e.submitText,o=e.title,i=e.children,r=e.onSubmit;return Object(l.jsx)("section",{className:t?"popup popup_opened":"popup",id:"popup__".concat(a),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsx)("button",{onClick:n,type:"button",className:"popup__icon-close popup__icon-close-edit-form"}),Object(l.jsxs)("form",{onSubmit:r,className:"form ".concat(a,"-form"),name:"".concat(a,"-form"),noValidate:!0,children:[Object(l.jsx)("h2",{className:"form__header",children:o}),i,Object(l.jsx)("input",{type:"submit",className:"form__button ".concat(a,"-form__submit-button"),value:c})]})]})})};var g=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,o=e.isLoading,i=Object(a.useContext)(j),r=Object(a.useState)(""),u=Object(s.a)(r,2),d=u[0],b=u[1],p=Object(a.useState)(""),h=Object(s.a)(p,2),m=h[0],f=h[1];return Object(a.useEffect)((function(){b(i.name),f(i.about)}),[i.about,i.name]),Object(l.jsx)(C,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:d,about:m})},submitText:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c......":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"profile-edit",children:Object(l.jsxs)("fieldset",{className:"form__profile-info",children:[Object(l.jsx)("input",{className:"form__input form__input_data_heading",type:"text",value:d||"",onChange:function(e){b(e.target.value)},placeholder:"\u0418\u043c\u044f",name:"name",id:"name-input",required:!0,minLength:"2",maxLength:"40"}),Object(l.jsx)("span",{className:"form__error name-input-error"}),Object(l.jsx)("input",{className:"form__input form__input_data_description",type:"text",value:m||"",onChange:function(e){f(e.target.value)},placeholder:"\u041e \u0441\u0435\u0431\u0435",name:"about",id:"job-input",required:!0,minLength:"2",maxLength:"200"}),Object(l.jsx)("span",{className:"form__error job-input-error"})]})})};var N=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,o=e.isLoading,i=Object(a.useContext)(j),r=Object(a.useRef)();return Object(a.useEffect)((function(){r.current.value=""}),[i.avatar]),Object(l.jsx)(C,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onSubmit:function(e){e.preventDefault(),c(r.current.value)},onClose:n,submitText:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c......":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",name:"avatar-edit",children:Object(l.jsxs)("fieldset",{className:"form__profile-info",children:[Object(l.jsx)("input",{className:"form__input form__input_avatar_url",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",ref:r,name:"avatar",id:"avatar-url-input",required:!0}),Object(l.jsx)("span",{className:"form__error avatar-url-input-error"})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,c=e.onSubmit,o=e.isLoading,i=Object(a.useState)(""),r=Object(s.a)(i,2),u=r[0],d=r[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),p=b[0],h=b[1];return Object(l.jsx)(C,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:u,link:p}),d(""),h("")},submitText:o?"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c...":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",name:"add-card",children:Object(l.jsxs)("fieldset",{className:"form__profile-info",children:[Object(l.jsx)("input",{className:"form__input form__input_card_heading",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",value:u||"",onChange:function(e){d(e.target.value)},id:"card-head-input",required:!0,minLength:"2",maxLength:"30"}),Object(l.jsx)("span",{className:"form__error card-head-input-error"}),Object(l.jsx)("input",{className:"form__input form__input_card_link",type:"url",value:p||"",onChange:function(e){h(e.target.value)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",id:"card-link-input",required:!0}),Object(l.jsx)("span",{className:"form__error card-link-input-error"})]})})};var S=function(e){var t=e.onClose,n=e.isOpen,a=e.onSubmit,c=e.isLoading;return Object(l.jsx)(C,{onClose:t,isOpen:n,onSubmit:function(e){e.preventDefault(),a()},title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",submitText:c?"\u0423\u0434\u0430\u043b\u044f\u0435\u043c...":"\u0414\u0430",name:"delete"})},y=n.p+"static/media/oval.3b24a6b9.svg";var L=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(s.a)(o,2),u=i[0],b=i[1],f=Object(a.useState)(!1),_=Object(s.a)(f,2),O=_[0],C=_[1],L=Object(a.useState)(!1),U=Object(s.a)(L,2),T=U[0],z=U[1],E=Object(a.useState)(!1),P=Object(s.a)(E,2),D=P[0],A=P[1],w=Object(a.useState)({}),I=Object(s.a)(w,2),q=I[0],F=I[1],J=Object(a.useState)({name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",avatar:y}),M=Object(s.a)(J,2),B=M[0],G=M[1],H=Object(a.useState)([]),R=Object(s.a)(H,2),V=R[0],Y=R[1],K=Object(a.useState)({}),Q=Object(s.a)(K,2),W=Q[0],X=Q[1],Z=Object(a.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=function(){C(!1),c(!1),b(!1),z(!1),A(!1),X({})};return Object(a.useEffect)((function(){v.getUserInfo().then((function(e){G(e)})).catch((function(e){console.log(e)})),v.getInitialCards().then((function(e){Y(e)})).catch((function(e){console.log(e)}))}),[]),Object(l.jsx)(j.Provider,{value:B,children:Object(l.jsx)(x.Provider,{value:V,children:Object(l.jsxs)("div",{className:"page",children:[Object(l.jsx)(d,{}),Object(l.jsx)(p,{onEditAvatar:function(){C(!0)},onEditProfile:function(){c(!0)},onAddPlace:function(){b(!0)},onCardClick:function(e){A(!0),F({link:e.link,name:e.name})},cards:V,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===B._id}));v.changeLikeCardStatus(e._id,t).then((function(t){Y((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))}))},onCardDelete:function(e){z(!0),X(e)}}),Object(l.jsx)(h,{}),Object(l.jsx)(g,{isOpen:n,onClose:ne,onUpdateUser:function(e){te(!0),v.setUserInfo(e).then((function(e){G(e)})).then((function(){ne()})).then((function(){te(!1)})).catch((function(e){te(!1),console.log(e)}))},isLoading:ee}),Object(l.jsx)(N,{isOpen:O,onClose:ne,onUpdateAvatar:function(e){te(!0),v.changeAvatar(e).then((function(e){G(e)})).then((function(){ne()})).then((function(){te(!1)})).catch((function(e){te(!1),console.log(e)}))},isLoading:ee}),Object(l.jsx)(k,{isOpen:u,onClose:ne,onSubmit:function(e){te(!0),v.addNewCard(e).then((function(e){Y([e].concat(Object(r.a)(V)))})).then((function(){ne()})).then((function(){te(!1)})).catch((function(e){te(!1),console.log(e)}))},isLoading:ee}),Object(l.jsx)(S,{isOpen:T,onClose:ne,onSubmit:function(){te(!0),v.deleteCard(W._id).then((function(){var e=V.filter((function(e){return e._id!==W._id}));Y(e)})).then((function(){ne()})).then((function(){te(!1)})).catch((function(e){te(!1),console.log(e)}))},isLoading:ee}),Object(l.jsx)(m,{isOpen:D,card:q,onClose:ne})]})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(L,{})}),document.getElementById("root")),U()}},[[16,1,2]]]);
//# sourceMappingURL=main.fb153d76.chunk.js.map